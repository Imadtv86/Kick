name: YouTube Live Streaming

on:
  push:
    branches:
      - main

jobs:
  stream_to_youtube:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout Repository
        uses: actions/checkout@v2

      - name: Set up FFmpeg
        run: sudo apt-get update && sudo apt-get install ffmpeg -y

      - name: Start Streaming to YouTube
        env:
          YOUTUBE_STREAM_KEY: 0zru-1w0v-j4q5-46ck-eg6m  # Stream Key
          M3U8_LINK: https://video-weaver.cdg10.hls.live-video.net/v1/playlist/CsMFlur1jZpOlJzWM2WB-UyIL3Y-cgOG8urMbDn4XPmh-1uLd89etACgWRnKmJ9uG5mfdkjTI72XTqYoJu62hMYY7SqWYdZGw_q6NLYCnjEPrABUwnyn3CNwKr41Dvhy4AcmmWZRsOmq2l48ZFBgrZe__tgvO2pbbB9cKfTi-cH7rIO4RQnKCQ5DqFai4JlLIzOcVtW4Z66tS4PO7lVTQaIrPqC4fgB9aeVFSukYCEzqHPMaQ41XRFs5ceweEc5zQgeHNHerVyknhXJ9yiACZDhsApbBcEbiG9Z-Jqb1BA74Ig_QcyZ7mBhECGGzFauzbLsRsrjD23kIBCVCzDFieeWkKTXCUkOELiuTrscJX4Pm4PjpF3nPLZ4Tev42ALGRPUeMB2QEr9bzq_0ybPLYk2EdiCxnFchBaBXl5sn8dudFokVlHSv_W75UN7Bj7n5rSmazvJcvY8xkoYX0gh_H-DfnvIFoblRFWxlEtwkBTzsdejGDhPHF3P9i4Y77GaOyJoC6wzKrAJYkYF2MiHFp884GgpunknyZVLnrywSp-WzO0PSE9PFtUlghztfqt_vOjFF8CIOCYuLMVs6xm3ZxmubBcgD3AvzJnEpAUqmmd4UakYEq4o5cKLlV7zxSWhgIq7R_Th7kArZt3jsnZTeoFxj9B_2eB6g6195f_GWxAl_1v3rNUm9fomhHHgsEHNyWtVs-srUwwpWGWP8L0OfbcREL6NkbLMPIIQ7rigezwig5YWHtPZ7H4vn6va6S8sFesiZaSp9avb2lqqnbEZJUdZxPAHiYEDBgVCP-j9iyE-W5U2oSbYPWVloW26g6A4QxyDxkcKR5or8GLuOIV9EyLVmMie7bARCFq8eQ4FMLFWokDUxEMx-RsYx4hh3KtVaqugoLWlNJRBL3nfqs9M0cMfMkm39s8lV-YlcFI2xx1kumVakkl1AaDHQ5spP0YGpqYeOqjyABKglldS13ZXN0LTIwoQs.m3u8
        run: |
          ffmpeg -i $M3U8_LINK -f flv rtmp://a.rtmp.youtube.com/live2/$YOUTUBE_STREAM_KEY
